<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>محول الليرة الذكي - نسخة محسنة</title>

<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
* { box-sizing: border-box; margin:0; padding:0; }
body {
    font-family: 'Tajawal', sans-serif;
    display: flex; justify-content: center; align-items: center;
    min-height: 100vh;
    background: linear-gradient(-45deg, #a8e6cf, #dcedc1, #ffd3b6, #ffaaa5);
    background-size: 400% 400%;
    animation: gradientBG 15s ease infinite;
}
@keyframes gradientBG {
    0%{background-position:0 50%;}
    50%{background-position:100% 50%;}
    100%{background-position:0 50%;}
}

.main-card {
    background: rgba(255,255,255,0.95);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-radius: 30px;
    padding: 30px 25px;
    max-width: 450px;
    width: 100%;
    text-align: center;
    box-shadow: 0 15px 40px rgba(0,0,0,0.15);
    border: 1px solid rgba(255,255,255,0.6);
    transition: transform 0.3s ease;
}
.main-card:hover { transform: translateY(-5px); }

h1 { color: #2e7d32; margin-bottom: 25px; font-size: 28px; }

.input-area { position: relative; margin-bottom: 15px; display:flex; align-items:center; }
input[type="number"] {
    flex:1;
    padding: 18px 15px 18px 15px;
    font-size: 20px;
    border-radius: 15px;
    border: 2px solid #fff;
    background: #fff;
    color: #1b3a24;
    font-family: inherit;
    outline: none;
    transition: 0.3s;
}
input:focus { border-color: #66bb6a; box-shadow: 0 0 10px rgba(102,187,106,0.4); }

.input-buttons {
    display: flex;
    gap: 8px;
    margin-left: 10px;
}

.input-buttons button {
    border: none; padding: 10px 12px; border-radius: 12px;
    cursor: pointer; display: flex; align-items:center; justify-content:center;
    transition: 0.3s; font-size:16px;
}
.input-buttons button:hover { transform: scale(1.1); }

.btn-scan { background:#e8f5e9; color:#2e7d32; }
.btn-input-speak { background:#2e7d32; color:#fff; }

.result-box {
    background: #fff; padding: 25px; border-radius: 20px;
    margin: 20px 0; border: 1px solid #e8f5e9;
    box-shadow:0 10px 25px rgba(0,0,0,0.08);
}

#inputValue, #resultValue { font-size: 30px; font-weight: bold; color: #2e7d32; margin-bottom:5px; }

.speak-result-btn {
    margin-top:8px;
    background: #43a047; color:#fff; border:none;
    padding:10px 22px; border-radius:50px;
    cursor:pointer; transition:0.3s; display:inline-flex; align-items:center; gap:8px;
}
.speak-result-btn:hover { background:#2e7d32; transform:scale(1.05); }

select { width:100%; padding:12px; border-radius:12px; border:1px solid #ddd; margin-top:10px; font-family:inherit; cursor:pointer; }

.social-links { margin-top: 15px; display: flex; justify-content: center; gap: 20px; }
.social-links a { color: #2e7d32; font-size: 28px; transition:0.3s; text-decoration: none; }
.social-links a:hover { transform: translateY(-3px) scale(1.2); color: #66bb6a; }

footer { 
    margin-top: 20px; font-size: 13px; color: #2e7d32; padding-top: 10px; border-top: 1px solid rgba(0,0,0,0.05);
}
.engineer { font-weight:bold; color:#1b5e20; }

</style>
</head>
<body>

<div class="main-card">
    <h1><i class="fas fa-money-bill-transfer"></i> محول الليرة الذكي</h1>

    <div class="input-area">
        <input type="number" id="userInput" placeholder="أدخل المبلغ بالأرقام..." oninput="doCalc()" inputmode="numeric">
        <div class="input-buttons">
            <button class="btn-scan" onclick="document.getElementById('fileIn').click()" title="مسح من صورة"><i class="fas fa-camera"></i></button>
            <button class="btn-input-speak" onclick="playClick(); speakInput()"><i class="fas fa-volume-up"></i></button>
        </div>
        <input type="file" id="fileIn" accept="image/*" style="display:none" onchange="scanImage(event)">
    </div>

    <select id="mode" onchange="doCalc()">
        <option value="toNew">قديم ← حديث (حذف صفرين)</option>
        <option value="toOld">حديث ← قديم (إضافة صفرين)</option>
    </select>

    <div class="result-box">
        <span id="inputValue">0</span>
        <div style="font-size:12px; color:#558b63;">الرقم الذي أدخلته</div>

        <span id="resultValue">0</span>
        <div style="font-size:12px; color:#558b63;">ليرة سورية</div>

        <button class="speak-result-btn" onclick="playClick(); speakResult()"><i class="fas fa-volume-up"></i> اسمع الرقم الناتج</button>
    </div>

    <div class="social-links">
        <a href="https://www.facebook.com/share/1A7EZrNuM4/" target="_blank" title="فيسبوك"><i class="fab fa-facebook"></i></a>
        <a href="https://www.instagram.com/lens.calm?igsh=c3RlaXpxeWI3dHIy" target="_blank" title="انستغرام"><i class="fab fa-instagram"></i></a>
    </div>

    <footer>تصميم وتطوير <span class="engineer">المهندسة عشتار</span> &copy; 2025</footer>
</div>

<audio id="clickSound" src="https://freesound.org/data/previews/522/522546_10226500-lq.mp3"></audio>
<script src='https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js'></script>

<script>
let currentResult = 0;

function playClick() {
    const audio = document.getElementById('clickSound');
    audio.currentTime = 0;
    audio.play();
}

function doCalc() {
    const input = document.getElementById('userInput').value;
    const mode = document.getElementById('mode').value;
    const resElem = document.getElementById('resultValue');
    const inElem = document.getElementById('inputValue');

    if(input && input>0){
        currentResult = (mode==='toNew') ? input/100 : input*100;
        resElem.innerText = Number(currentResult).toLocaleString('ar-EG');
        inElem.innerText = Number(input).toLocaleString('ar-EG');
        if(navigator.vibrate) navigator.vibrate(10);
    } else {
        resElem.innerText = '0';
        inElem.innerText = '0';
        currentResult = 0;
    }
}

function speakInput() {
    const input = document.getElementById('userInput').value || 0;
    if(input==0) return;
    const utter = new SpeechSynthesisUtterance(`الرقم الذي أدخلته ${input}`);
    utter.lang='ar-SA'; utter.rate=0.9;
    window.speechSynthesis.cancel(); window.speechSynthesis.speak(utter);
}

function speakResult() {
    if(currentResult==0) return;
    const utter = new SpeechSynthesisUtterance(`النتيجة ${currentResult} ليرة سورية`);
    utter.lang='ar-SA'; utter.rate=0.9;
    window.speechSynthesis.cancel(); window.speechSynthesis.speak(utter);
}

function scanImage(event){
    const file = event.target.files[0];
    if(!file) return;
    const btnIcon = document.querySelector('.btn-scan i');
    btnIcon.className = "fas fa-spinner fa-spin";

    Tesseract.recognize(file,'ara').then(({data:{text}})=>{
        const num = text.replace(/[^\d]/g,'').match(/\d+/);
        if(num){ document.getElementById('userInput').value=num[0]; doCalc(); }
    }).finally(()=>{ btnIcon.className="fas fa-camera"; });
}
</script>

</body>
                                                                                                </html>
